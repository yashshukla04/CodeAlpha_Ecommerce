<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Details - DailyMart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f8f9fa; }
        .navbar { background: #2c3e50; }
        .product-img { max-height: 400px; object-fit: contain; border-radius: 10px; }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark p-3">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">üõí DailyMart</a>
            <a href="cart.html" class="btn btn-warning">Go to Cart</a>
        </div>
    </nav>

    <div class="container mt-5">
        <a href="index.html" class="btn btn-outline-secondary mb-3">‚Üê Back to Home</a>
        
        <div class="row bg-white p-5 rounded shadow-sm" id="product-container">
            <div class="text-center"><div class="spinner-border text-primary"></div></div>
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');

        fetch(`http://localhost:5000/api/products/${id}`)
            .then(res => res.json())
            .then(p => {
                document.getElementById('product-container').innerHTML = `
                    <div class="col-md-6 text-center">
                        <img src="${p.image}" class="img-fluid product-img mb-3" alt="${p.name}">
                    </div>
                    <div class="col-md-6 d-flex flex-column justify-content-center">
                        <span class="badge bg-info text-dark w-25 mb-2">${p.category}</span>
                        <h2 class="fw-bold">${p.name}</h2>
                        <h3 class="text-success fw-bold mb-3">‚Çπ${p.price.toLocaleString()}</h3>
                        <p class="text-muted lead">${p.description}</p>
                        <hr>
                        <div class="d-grid gap-2 mt-2">
                            <button onclick="addToCart('${p.name}', ${p.price})" class="btn btn-primary btn-lg">Add to Cart</button>
                            <button onclick="buyNow('${p.name}', ${p.price})" class="btn btn-success btn-lg">Buy Now</button>
                        </div>
                    </div>`;
            })
            .catch(() => document.getElementById('product-container').innerHTML = "<h3>Product Not Found</h3>");

        function addToCart(name, price) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.push({ name, price });
            localStorage.setItem('cart', JSON.stringify(cart));
            alert("Added to Cart!");
        }

        function buyNow(name, price) {
            addToCart(name, price);
            window.location.href = "cart.html";
        }
        
    </script>
</body>
</html>